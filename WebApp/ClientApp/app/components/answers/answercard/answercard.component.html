<p *ngIf="!answerView"><em>Loading...</em></p>
<div *ngIf="answerView" class="answer-card">

    <div *ngIf="!isUpdateAnswerVisible">
        <div class="answer-user" *ngIf="answerView.answer.aspNetUser">
            {{answerView.answer.aspNetUser.firstName}}
            <div class="answer-date">Answered {{answerView.answer.originDate | readableDate}}</div>
        </div>

        <div class="rating" *ngIf="rating[0]">
            <span (click)="rate(5)">☆</span>
            <span (click)="rate(4)">☆</span>
            <span (click)="rate(3)">☆</span>
            <span (click)="rate(2)">☆</span>
            <span (click)="rate(1)">☆</span>
        </div>
        <div class="rating" *ngIf="rating[1]">
            <span (click)="rate(5)">☆</span>
            <span (click)="rate(4)">☆</span>
            <span (click)="rate(3)">☆</span>
            <span (click)="rate(2)">☆</span>
            <span (click)="rate(1)">★</span>
        </div>
        <div class="rating" *ngIf="rating[2]">
            <span (click)="rate(5)">☆</span>
            <span (click)="rate(4)">☆</span>
            <span (click)="rate(3)">☆</span>
            <span (click)="rate(2)">★</span>
            <span (click)="rate(1)">★</span>
        </div>
        <div class="rating" *ngIf="rating[3]">
            <span (click)="rate(5)">☆</span>
            <span (click)="rate(4)">☆</span>
            <span (click)="rate(3)">★</span>
            <span (click)="rate(2)">★</span>
            <span (click)="rate(1)">★</span>
        </div>
        <div class="rating" *ngIf="rating[4]">
            <span (click)="rate(5)">☆</span>
            <span (click)="rate(4)">★</span>
            <span (click)="rate(3)">★</span>
            <span (click)="rate(2)">★</span>
            <span (click)="rate(1)">★</span>
        </div>
        <div class="rating" *ngIf="rating[5]">
            <span (click)="rate(5)">★</span>
            <span (click)="rate(4)">★</span>
            <span (click)="rate(3)">★</span>
            <span (click)="rate(2)">★</span>
            <span (click)="rate(1)">★</span>
        </div>

        <div [innerHTML]="answerContent"
             [ngClass]="{
             'answer-content': true,
             'deleted-answer': answerView.answer.isDeleted}">
        </div>
        <button *ngIf="isAsker"
                class="btn btn-default"
                (click)="OnEditClick()">
            Edit
        </button>
        <button *ngIf="isAsker"
                class="btn btn-default"
                (click)="OnDeleteClick()">
            <span *ngIf="answerView.answer.isDeleted">Undelete</span>
            <span *ngIf="!answerView.answer.isDeleted">Delete</span>
        </button>
    </div>

    <div *ngIf="isUpdateAnswerVisible">
        <update-answer [answer]="answerView.answer"
                       (answerUpdated)="onAnswerUpdated($event)"
                       (updateCancelled)="onUpdateCancelled()">
        </update-answer>
    </div>
</div>
